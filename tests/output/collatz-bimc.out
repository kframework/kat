// IMP-KAT Tests
// =============

// This is a simple testing harness driven by the `tangle` script. Call
// `./tangle test` in the root directory to run the test-set.

// BIMC
// ----

// Here, we allow each program to initialize (get through variable declarations) by
// running `step-with skip`. Then we issue some `bimc` query to check if the
// program obeys the given invariant up to the depth-bound.

// ### Collatz

// Here we test if the Collatz sequence for `782` contains any numbers greater than
// `1000`.


<kat-imp>
 <s> #STUCK ~> #bimc-result #false in 23 steps </s>
 <kat>
  <analysis> .Analysis </analysis>
  <states> .States </states>
 </kat>
 <imp>
  <k> x ~> #freezer_+_1 ( 1 ) ~> #freezer_=_;0 ( x ) ~> while ( 2 <= n ) { if ( n <= ( ( n / 2 ) * 2 ) ) { n = n / 2 ; } else { n = 3 * n + 1 ; } x = x + 1 ; } </k>
  <mem> x |-> 1 n |-> 1174 </mem>
 </imp>
</kat-imp>

