#!/usr/bin/env bash

exit_status='0'

runtest() {
    local test_file test_hash_orig test_hash_exec
    test_file="$1"      ; shift
    test_hash_orig="$1" ; shift
    test_hash_exec="$1" ; shift
    ./kat test "$test_file" "$test_hash_orig" "$test_hash_exec" || exit_status="$?"
}

runtest tests/fun/ackermann.fun                   103a032a87e4855ba91fe5b5c9b52a7b b63045261cd1eab797e2efc2d09804c2
runtest tests/fun/collatz-all-upto.fun            1505d6f98afd8039a446b6db4fc03d15 1405772010e8559afc1e7a790785c320
runtest tests/fun/constructor-bst-sorting.fun     5cf50a61d7a350beb9b4a1c99f20e2ab 2e9aa3cb0dcbd492c2af11088502caeb
runtest tests/fun/constructor-tree-mirror.fun     5d5282b1a5eb1e1cc831889fe5d64a56 767c35265175b1d82bb312e6d7fd87c7
runtest tests/fun/empty-argument.fun              8c375a6f1820372c6cc32b84e2740ccd e1d24c4c1a8155730194e5b3e3835e2b
runtest tests/fun/exceptions-branch.fun           062736d4f769b6778384db923a26b75c 0029b082f4957ac57af4dd68deceb43d
runtest tests/fun/exceptions-branch-shadowing.fun bf0999071053e8106d89e049df42c545 d98371e066f2de30604a809e882a6e4b
runtest tests/fun/exceptions.fun                  10931e126aa8637b065c958b85ccb6e5 0b5ad6b94b271f7c3f04ece92bde0d40
runtest tests/fun/exceptions-simple.fun           ecd3ab88dd726d28ef8a2a53e686eb6b 2ae4d15c4a7cf2d71a0022c06ba5c942
runtest tests/fun/factorial-and-list-max.fun      fb5f3ffe3c0109d330feb4418746e5b2 ddd215aa59ec281c9bda1d28b40833f0
runtest tests/fun/fold.fun                        1316d3231846a76625b4bc560f3ac758 30cac5be882df221bf1d571f075eb935
runtest tests/fun/fold-sum.fun                    ea64bc2af98d82589b9db650b2a152d1 bb8b9be131f3edabf21053afef559c4c
runtest tests/fun/fold-tree.fun                   107ca787401bcadbfb24c00c8268d0a9 b25872e6c1e243bc16a359d57249a1fb
runtest tests/fun/list-1.fun                      3ef41d1fa0266af816cd5dbb1507760d 52fa09d4b6091af19f9670e7feda09f1
runtest tests/fun/list-2.fun                      b406b72ccca0b381ce5bc86333a63249 2ddba4cc1b7844ccf3345685389e3955
runtest tests/fun/list-match.fun                  38be5f602078ff8ea7da583fb2711b4a 198d959c01fb4544353b933d3f85321e
runtest tests/fun/list-max.fun                    086f61a3292db6b68d973e3df4aaaf5b 2450449439463f5008fe99d821bd7304
runtest tests/fun/long-loop.fun                   6e2cb3e9cbf9b8460ccaa7c5ae7d8188 31f7f7378b69a1f11b71383d85abc751
runtest tests/fun/map.fun                         35f2c2feaf21c2c6318079dc991badcd 1598924ad7a2dd2a1b353bbd1dbf5374
runtest tests/fun/non-linear-pattern.fun          0c3192aac4e49aed27747a1841abd3f0 eb8d471b3a9b14d6d778027395d35d95
runtest tests/fun/nth.fun                         f80031255e5d68b545ac4e0d6a101286 ff005ba889f96c91d473f2eb1c543f13
runtest tests/fun/partial-application.fun         c585e314c5830ac3ef8da011a5701dec 5d657c7b27b3beef1660b410a40542be
runtest tests/fun/pattern-failure.fun             d94d7cd6375326340309c673fe4c0cb1 57aa0ef276df3818c671b337bddb6920
runtest tests/fun/pattern.fun                     0bde5e8afc94f1a16f623d46dc239c1d 479ecb7fa9023e8a71de093cca4f8485
runtest tests/fun/pattern-simple.fun              3b58b41549dedb7070f3f31e115b04a9 141de01cd5bf3901624eb871b3bfd1be
runtest tests/fun/polymorphism-1.fun              7f1a30162d10027c5dc96867c50735cb 7fa2d1d5339ccfba5a53046f7aaae953
runtest tests/fun/polymorphism-2.fun              d89a2c547d87a9b3f7ccdfad34c324cb bc22029d6dc95843cf6ee4eae6a16cdb
runtest tests/fun/polymorphism-3.fun              b5a729c9b23883a5eaf46c8d0f91fffb 1b1c08d1cde79417f62b89616fc5241c
runtest tests/fun/prelude.fun                     a8cab1aa7432c7f710a7dee46282d786 46417781f019b888076bb69ba9b01d9c
runtest tests/fun/references-1.fun                6533d8b5921c87787933085e13f6339d bd42ea3d9be0fa54e5800dc63dfed065
runtest tests/fun/references-2.fun                7e087b171a69092e3fc630afeaece4a0 fb114b06bdd4f8a8460d8ee5dbdaf16c
runtest tests/fun/references-3.fun                e4055be648a775a273b48297c543882f 9bae11b8c891c0035b4edf9337d2ad43
runtest tests/fun/references-4.fun                a769758a875288268478418d913c4c05 89b2b945f6cb65e6a0a6d7b0506b7466
runtest tests/fun/references-5.fun                7253969e7627926c1e92cccc4572a208 a682c212737d60e374ad1a17ac08d7ef
runtest tests/fun/simple-application.fun          e0ec3580a4d5bf4e6cec120ce09c73fb 7609c1bb3f891f19b99ce10da428ae19
runtest tests/fun/simple-case.fun                 7587f7dd9bf78bb90aaba90113ffaaf7 d3311cc771b34bdbf13caf26706e9ecd
runtest tests/fun/simple-case-letrec.fun          40f8dc34adfbb9ebfa36f8eb8b6b5c42 81ffe7ad3fe27254c9127d78824d852b
runtest tests/fun/simple-list.fun                 b8884415b7ff0f40d2288ad5379cca73 189c1c27d04591e9935a44c3302ef058
runtest tests/fun/sum.fun                         462f9bc25a799532d44dd93dd10c44bb 975def2beaac13930c18a5cad8792a52
runtest tests/fun/sum-tail-recursive.fun          81ed5d115b043ae2b448476b8732aab6 25ef32677bc05a09be4a2529cc8b9d90
runtest tests/fun/tail-recursion.fun              0dfb92d3b508f3998c5351926857fccd 676a0570446f5dd84240cfcadb00d6ea
runtest tests/fun/tuple-1.fun                     db4c0e2f2c6209d2cea8f9fafa243305 720f0ade0e6940a9ee89e61b59bc3cbe
runtest tests/fun/tuple-2.fun                     5bed64a6d2c42dac3d71676a63f7130d 6a5e9ff0b0cbbad9133c1cc75c593199
runtest tests/fun/tuple-3.fun                     6c0d791c73660d0e37b509ef65f491f0 5763a568d528a6bd0cd67fa772c1423e

exit "$exit_status"
